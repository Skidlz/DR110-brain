// Created by zack on 12/23/2023.
#ifndef DR110_BRAIN_GRAPHICS_H
#define DR110_BRAIN_GRAPHICS_H

#include <stdint.h>
#include <Arduino.h>
//#include <avr/pgmspace.h>
#include <U8g2lib.h>

#ifdef U8X8_HAVE_HW_SPI
#include <SPI.h>
#endif

#ifdef U8X8_HAVE_HW_I2C
#include <Wire.h>
#endif

#define gridRows 7
#define gridCols 16
#define cellWidth 7
#define cellHeight 6
#define yOffset 5
#define xOffset 15

//U8G2_SSD1306_128X64_NONAME_F_HW_I2C u8g2(U8G2_R0); //i2c
extern U8G2_SSD1309_128X64_NONAME0_F_4W_HW_SPI u8g2; //spi

#define dr110_L_width 8
#define dr110_L_height 42
const uint8_t dr110_L_bits[] PROGMEM = {
        0x16, 0x11, 0x31, 0x51, 0x56, 0x00, 0x17, 0x15, 0x35,
        0x55, 0x57, 0x00, 0x06, 0x01, 0x12, 0x74, 0x53, 0x00, 0x43, 0x45, 0x63,
        0x55, 0x77, 0x00, 0x02, 0x65, 0x17, 0x15, 0x65, 0x00, 0x06, 0x51, 0x51,
        0x21, 0x16, 0x00, 0x06, 0x31, 0x51, 0x71, 0x16, 0x10 };

#define dr110_B_width 105
#define dr110_B_height 5
const uint8_t dr110_B_bits[] PROGMEM = { //bottom of screen test
        0x06, 0x00, 0x80, 0x02, 0x00, 0x60, 0x00, 0x80, 0x01, 0x00, 0x00, 0x22,
        0x00, 0x00, 0x21, 0x65, 0x80, 0x9b, 0x0c, 0xa0, 0xa4, 0x8a, 0xaa, 0xba,
        0x2a, 0x36, 0x99, 0x01, 0x52, 0x17, 0x80, 0x5b, 0x05, 0x60, 0xea, 0x8a,
        0xa9, 0x92, 0x3a, 0xaa, 0xaa, 0x01, 0x54, 0x57, 0x80, 0xca, 0x09, 0xa0,
        0xee, 0x86, 0x3a, 0x91, 0x3b, 0xaa, 0xaa, 0x00, 0x23, 0x65, 0x80, 0x5a,
        0x0d, 0xe0, 0xaa, 0x8a, 0x2a, 0x91, 0x2a, 0x22, 0x99, 0x01 };

#define num_width 8
#define num_height 11
//7 segment lcd-style numbers to show patterns, etc
const uint8_t num0_bits[] PROGMEM = { 0x7e, 0xbd, 0xc3, 0xc3, 0x81, 0x00, 0x81, 0xc3, 0xc3, 0xbd, 0x7e };
const uint8_t num1_bits[] PROGMEM = { 0x00, 0x80, 0xc0, 0xc0, 0x80, 0x00, 0x80, 0xc0, 0xc0, 0x80, 0x00 };
const uint8_t num2_bits[] PROGMEM = { 0x7e, 0xbc, 0xc0, 0xc0, 0xbc, 0x7e, 0x3d, 0x03, 0x03, 0x3d, 0x7e };
const uint8_t num3_bits[] PROGMEM = { 0x7e, 0xbc, 0xc0, 0xc0, 0xbc, 0x7e, 0xbc, 0xc0, 0xc0, 0xbc, 0x7e };
const uint8_t num4_bits[] PROGMEM = { 0x00, 0x81, 0xc3, 0xc3, 0xbd, 0x7e, 0xbc, 0xc0, 0xc0, 0x80, 0x00 };
const uint8_t num5_bits[] PROGMEM = { 0x7e, 0x3d, 0x03, 0x03, 0x3d, 0x7e, 0xbc, 0xc0, 0xc0, 0xbc, 0x7e };
const uint8_t num6_bits[] PROGMEM = { 0x7e, 0x3d, 0x03, 0x03, 0x3d, 0x7e, 0xbd, 0xc3, 0xc3, 0xbd, 0x7e };
const uint8_t num7_bits[] PROGMEM = { 0x7e, 0xbc, 0xc0, 0xc0, 0x80, 0x00, 0x80, 0xc0, 0xc0, 0x80, 0x00 };
const uint8_t num8_bits[] PROGMEM = { 0x7e, 0xbd, 0xc3, 0xc3, 0xbd, 0x7e, 0xbd, 0xc3, 0xc3, 0xbd, 0x7e };
const uint8_t num9_bits[] PROGMEM = { 0x7e, 0xbd, 0xc3, 0xc3, 0xbd, 0x7e, 0xbc, 0xc0, 0xc0, 0x80, 0x00 };

#define patt_text_width 15
#define patt_text_height 5
const uint8_t patt_text_bits[] PROGMEM = { 0x03, 0x00, 0x25, 0x77, 0x53, 0x22, 0x71, 0x22, 0x51, 0x22 };
const uint8_t song_text_bits[] PROGMEM = { 0x06, 0x00, 0x21, 0x65, 0x52, 0x17, 0x54, 0x57, 0x23, 0x65 };
const uint8_t step_text_bits[] PROGMEM = { 0x06, 0x00, 0x71, 0x1b, 0x22, 0x2b, 0x24, 0x19, 0x23, 0x0b };
const uint8_t tap_text_bits[] PROGMEM = { 0x07, 0x00, 0x22, 0x03, 0x52, 0x05, 0x72, 0x03, 0x52, 0x01 };

#define play_text_width 20
#define play_text_height 5
const uint8_t play_text_bits[] PROGMEM = { 0x03, 0x00, 0x00, 0x15, 0x29, 0x00, 0x93, 0x2a, 0x00, 0x91, 0x13, 0x00,
                                           0xb1, 0x12, 0x00 };
const uint8_t write_text_bits[] PROGMEM = { 0x11, 0x00, 0x00, 0xd1, 0xdc, 0x0d, 0x55, 0x89, 0x0c, 0xdb, 0x88, 0x04,
                                            0x51, 0x9d, 0x0c };

#define i_text_width 3
#define i_text_height 6
const uint8_t i_text_bits[] PROGMEM = { 0x07, 0x02, 0x02, 0x02, 0x02, 0x07 };

void u8g2Prepare();
void drawBlankGrid();
void drawStep(uint8_t step_x, uint8_t inst_y);
void clearStep(uint8_t step_x, uint8_t inst_y);
void populateGrid(boolean pattern[gridRows][gridCols]);
void blinkStep(uint8_t step, uint8_t inst, boolean pattern[gridRows][gridCols]);
void blinkModeText(uint8_t step, uint8_t mode);
const uint8_t* numberLookup(uint8_t number);
void drawText(uint8_t song, uint8_t measure, uint8_t bank, uint8_t rhythm, uint8_t mode);
void drawModeText(uint8_t mode);

#endif //DR110_BRAIN_GRAPHICS_H
